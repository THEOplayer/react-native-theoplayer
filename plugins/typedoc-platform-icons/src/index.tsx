import {
  Application,
  Context,
  Converter,
  ReflectionKind,
} from 'typedoc';

export function load(app: Application): void {
  app.converter.on(Converter.EVENT_RESOLVE_BEGIN, (ctx: Context) => {
    for (const reflection of ctx.project.getReflectionsByKind(ReflectionKind.All)) {
      const { comment } = reflection;
      if (comment) {
        comment.getTags('@platform').forEach((part) => {
          const tags = part.content[0];
          if (!tags) {
            return;
          }
          part.content = [];
          if (tags.text.indexOf('ios') >= 0) {
            part.content.push({
              kind: 'text',
              text: `<div style="display: inline-flex;align-items: center;border: purple 2px solid;border-radius: 20px;padding: 4px; font-size: small;background-color: purple;margin-left: 4px"">
          <svg
            fill="none"
            viewBox="0 0 24 24"
            height="14"
            class="translate-z icon-2xs mt-[-0.5px] shrink-0 text-palette-blue12 opacity-80"
            role="img">
            <g id="apple-custom-icon">
              <path
                id="Vector"
                fill="currentColor"
                d="M20.4478 17.3538C20.1312 18.0852 19.7564 18.7585 19.3222 19.3775C18.7303 20.2214 18.2457 20.8055 17.8722 21.1299C17.2933 21.6623 16.673 21.935 16.0088 21.9505C15.5319 21.9505 14.9568 21.8148 14.2874 21.5395C13.6158 21.2656 12.9986 21.1299 12.4343 21.1299C11.8424 21.1299 11.2076 21.2656 10.5287 21.5395C9.84865 21.8148 9.30085 21.9582 8.88201 21.9724C8.24504 21.9996 7.61014 21.7192 6.9764 21.1299C6.57191 20.7771 6.06598 20.1723 5.45989 19.3155C4.80961 18.4005 4.27499 17.3396 3.85615 16.13C3.4076 14.8235 3.18274 13.5583 3.18274 12.3335C3.18274 10.9304 3.48591 9.72034 4.09316 8.70628C4.5704 7.89174 5.20531 7.24922 5.99994 6.77753C6.79457 6.30584 7.65317 6.06547 8.57781 6.0501C9.08374 6.0501 9.7472 6.20659 10.5717 6.51416C11.3938 6.82276 11.9217 6.97926 12.1532 6.97926C12.3262 6.97926 12.9127 6.79627 13.9068 6.43145C14.847 6.09313 15.6404 5.95304 16.2905 6.00823C18.0519 6.15038 19.3752 6.84473 20.2552 8.09567C18.6799 9.05016 17.9007 10.387 17.9162 12.102C17.9304 13.4379 18.415 14.5495 19.3674 15.4321C19.799 15.8418 20.2811 16.1584 20.8174 16.3833C20.7011 16.7206 20.5783 17.0436 20.4478 17.3538ZM16.4081 1.45728C16.4081 2.50431 16.0256 3.48192 15.2631 4.38678C14.343 5.46249 13.2301 6.08408 12.0232 5.986C12.0078 5.86039 11.9989 5.72819 11.9989 5.58926C11.9989 4.58412 12.4365 3.50841 13.2135 2.62888C13.6015 2.18355 14.0949 1.81327 14.6932 1.51789C15.2902 1.22692 15.855 1.066 16.3861 1.03845C16.4016 1.17842 16.4081 1.3184 16.4081 1.45727V1.45728Z"></path>
            </g>
          </svg>
          <span style="margin-left: 4px;">iOS</span>
        </div>`
            });
          }
          if (tags.text.indexOf('android') >= 0) {
            part.content.push({
              kind: 'text',
              text: `<div style="display: inline-flex;align-items: center;border: green 2px solid;border-radius: 20px;padding: 4px; font-size: small;background-color: green;margin-left: 4px">
          <svg fill="none" viewBox="0 0 24 24"
               height="14"
               class="translate-z icon-2xs mt-[-0.5px] shrink-0 text-palette-green12 opacity-80" role="img">
            <g id="android-custom-icon">
              <path id="Vector" fill="currentColor"
                    d="M17.0628 15.073C16.5576 15.073 16.1467 14.6605 16.1467 14.1537C16.1467 13.6469 16.5576 13.2347 17.0628 13.2347C17.5679 13.2347 17.9788 13.6469 17.9788 14.1537C17.9788 14.6605 17.5679 15.073 17.0628 15.073ZM6.9372 15.073C6.43204 15.073 6.02116 14.6605 6.02116 14.1537C6.02116 13.6469 6.43204 13.2347 6.9372 13.2347C7.44234 13.2347 7.85325 13.6469 7.85325 14.1537C7.85325 14.6605 7.44234 15.073 6.9372 15.073ZM17.3913 9.53705L19.2222 6.35598C19.3272 6.17313 19.2647 5.93959 19.0828 5.834C18.9008 5.72871 18.6677 5.79135 18.5624 5.97389L16.7087 9.19523C15.291 8.54619 13.6989 8.18468 12 8.18468C10.3011 8.18468 8.70893 8.54619 7.29131 9.19523L5.43751 5.97389C5.33226 5.79135 5.09916 5.72871 4.9172 5.834C4.73524 5.93959 4.67251 6.17313 4.77776 6.35598L6.60865 9.53705C3.46479 11.2524 1.31456 14.4454 1 18.2177H23C22.6851 14.4454 20.5349 11.2524 17.3913 9.53705Z"></path>
            </g>
          </svg>
          <span style="margin-left: 4px;">Android</span>
        </div>`
            });
          }
          if (tags.text.indexOf('web') >= 0) {
            part.content.push({
              kind: 'text',
              text: `<div style="display: inline-flex;align-items: center;border: dodgerblue 2px solid;border-radius: 20px;padding: 4px; font-size: small;background-color: dodgerblue;margin-left: 4px">
      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 122.88 115.33"
               height="14" fill="white"><g><path d="M76.98,97.89c-3.62,4.01-7.79,7.99-12.51,11.94c1.28-0.17,2.56-0.38,3.81-0.62c3.42-0.69,6.71-1.7,9.89-3.08 c0.82-0.35,1.62-0.72,2.41-1.1c0.59,0.76,1.25,1.42,1.96,1.98c0.77,0.61,1.59,1.09,2.45,1.45c-1.58,0.85-3.2,1.62-4.86,2.34 c-3.53,1.52-7.16,2.63-10.9,3.39c-3.74,0.76-7.61,1.14-11.59,1.14c-3.98,0-7.82-0.38-11.59-1.14c-3.7-0.73-7.26-1.83-10.76-3.32 c-0.03,0-0.1-0.03-0.14-0.07c-3.46-1.49-6.75-3.29-9.82-5.33c-3.08-2.04-5.92-4.39-8.51-6.99c-2.63-2.59-4.95-5.43-6.99-8.51 c-2.08-3.08-3.84-6.37-5.33-9.82c-1.52-3.53-2.63-7.16-3.39-10.9C0.38,65.52,0,61.64,0,57.66c0-3.98,0.38-7.82,1.14-11.59 c0.73-3.7,1.83-7.26,3.32-10.76c0-0.03,0.03-0.1,0.07-0.14c1.49-3.49,3.29-6.75,5.33-9.82c2.04-3.08,4.39-5.92,6.99-8.51 c2.59-2.63,5.43-4.95,8.51-6.99c3.08-2.08,6.36-3.84,9.82-5.33c3.53-1.52,7.16-2.63,10.9-3.39C49.81,0.38,53.69,0,57.66,0 c3.98,0,7.82,0.38,11.59,1.14c3.7,0.73,7.26,1.83,10.76,3.32c0.03,0,0.1,0.03,0.14,0.07c3.46,1.49,6.75,3.29,9.82,5.33 c3.08,2.04,5.92,4.39,8.51,6.99c2.63,2.59,4.95,5.43,6.99,8.51c2.08,3.08,3.84,6.37,5.33,9.82c1.52,3.53,2.63,7.16,3.39,10.9 c0.43,2.12,0.74,4.28,0.93,6.48l-5.23-1.39c-0.16-1.38-0.37-2.74-0.64-4.09c-0.69-3.42-1.7-6.71-3.08-9.89 c-0.86-2.04-1.83-3.98-2.91-5.85l0,0H86.38c3,5.13,5.16,10.23,6.47,15.32l-5.68-1.51c-1.48-4.56-3.71-9.16-6.71-13.81H60.19v9.39 c-0.36,0.21-0.72,0.46-1.07,0.74l0,0c-0.28,0.22-0.55,0.46-0.8,0.71c-0.34,0.35-0.66,0.72-0.93,1.12 c-0.44,0.64-0.79,1.35-1.06,2.11c-0.27,0.77-0.43,1.54-0.49,2.29c-0.05,0.64-0.03,1.3,0.07,1.95c0.08,0.54,0.2,1.07,0.38,1.59 l0.05,0.14c0.04,0.11,0.08,0.22,0.12,0.32c0.06,0.17,0.11,0.27,0.13,0.32l0.02-0.01l3.63,8.17h-0.06v23.8h10.62l2.24,5.05H60.19 v17.78c5.65-4.64,10.5-9.32,14.54-14.01L76.98,97.89L76.98,97.89z M115.14,97.97c-0.34,0.34-0.74,0.6-1.16,0.79 c-0.44,0.2-0.91,0.32-1.38,0.36c-0.51,0.04-1.03-0.01-1.53-0.17c-0.48-0.15-0.94-0.4-1.35-0.74l-11.09-9.41l-3.81,9.35 c-0.32,0.78-0.7,1.5-1.13,2.15c-0.44,0.66-0.93,1.23-1.44,1.68c-0.41,0.36-0.86,0.67-1.33,0.9c-0.47,0.23-0.95,0.38-1.45,0.45 c-0.58,0.08-1.16,0.04-1.72-0.12c-0.54-0.16-1.06-0.42-1.56-0.81c-0.4-0.31-0.77-0.71-1.12-1.19c-0.32-0.44-0.61-0.96-0.88-1.56 c-7.22-16.27-15.83-33.78-22.27-50.16c-0.08-0.22-0.14-0.44-0.17-0.67c-0.03-0.23-0.04-0.46-0.02-0.69 c0.02-0.27,0.08-0.53,0.17-0.79c0.09-0.25,0.21-0.5,0.36-0.72c0.08-0.11,0.16-0.22,0.26-0.31c0.08-0.08,0.17-0.16,0.27-0.23 c0.18-0.14,0.37-0.26,0.57-0.36l0.05-0.02c0.19-0.09,0.39-0.16,0.58-0.2l0.09-0.02c0.18-0.04,0.36-0.06,0.54-0.07 c0.21-0.01,0.41,0.01,0.61,0.04c0.07,0.01,0.14,0.02,0.21,0.03c17.64,4.38,35.38,9.38,52.98,14.05c0.63,0.17,1.19,0.38,1.68,0.62 c0.53,0.27,0.98,0.57,1.35,0.91c0.46,0.42,0.81,0.9,1.05,1.41c0.25,0.53,0.38,1.1,0.39,1.69v0.01c0.01,0.5-0.06,1-0.21,1.5 c-0.15,0.5-0.38,0.98-0.68,1.45c-0.37,0.58-0.85,1.16-1.43,1.69c-0.56,0.52-1.22,1.01-1.95,1.46c-2.89,1.7-5.77,3.5-8.64,5.24 l11.05,9.47c0.4,0.35,0.72,0.76,0.94,1.21l0.03,0.08c0.21,0.45,0.34,0.92,0.38,1.41c0.04,0.49-0.01,1-0.16,1.5 c-0.14,0.47-0.37,0.93-0.69,1.34C119.84,92.6,117.01,96.24,115.14,97.97L115.14,97.97z M112.24,94.34l5.35-6.28l-13-11.14 l-0.07-0.07c-0.06-0.06-0.13-0.13-0.18-0.19c-0.08-0.09-0.15-0.19-0.21-0.3c-0.33-0.54-0.4-1.16-0.26-1.73 c0.14-0.57,0.5-1.09,1.04-1.41c3.76-2.07,7.64-4.66,11.35-6.89c0.43-0.26,0.81-0.55,1.13-0.84c0.3-0.28,0.55-0.56,0.72-0.83 c0.07-0.11,0.12-0.2,0.15-0.29c-0.08-0.06-0.17-0.11-0.3-0.17c-0.19-0.09-0.44-0.17-0.73-0.25L67.51,50.77L88.39,97.8 c0.12,0.26,0.24,0.49,0.37,0.68l0.03,0.05c0.07,0.09,0.13,0.17,0.18,0.22c0.08-0.04,0.16-0.11,0.26-0.2 c0.24-0.21,0.48-0.5,0.7-0.84c0.24-0.36,0.46-0.79,0.65-1.27l5-12.28l0.05-0.1c0.04-0.08,0.08-0.16,0.12-0.23l0.03-0.05 c0.05-0.08,0.11-0.16,0.18-0.24c0.41-0.48,0.98-0.76,1.56-0.8c0.58-0.05,1.18,0.13,1.67,0.54L112.24,94.34L112.24,94.34z M50.89,109.83c-8.16-6.85-14.7-13.77-19.54-20.79H15.39c1.52,2.08,3.22,4.01,5.05,5.85c2.39,2.39,4.95,4.5,7.75,6.36 c2.77,1.87,5.78,3.49,9.03,4.88c0.03,0.03,0.07,0.03,0.1,0.07c3.15,1.31,6.4,2.35,9.79,3.01c1.25,0.24,2.53,0.45,3.8,0.62H50.89 L50.89,109.83z M12.07,83.99h16.05c-4.46-7.82-6.88-15.77-7.16-23.8H5.12c0.14,2.77,0.45,5.43,0.97,8.06 c0.69,3.42,1.69,6.71,3.08,9.89C10.03,80.18,11,82.12,12.07,83.99L12.07,83.99z M5.12,55.14h15.95c0.59-7.89,3.22-15.81,7.89-23.8 H12.07c-1.07,1.87-2.04,3.8-2.91,5.85c-0.03,0.03-0.03,0.07-0.07,0.1c-1.31,3.15-2.35,6.4-3.01,9.79 C5.57,49.71,5.22,52.37,5.12,55.14L5.12,55.14z M15.36,26.29h16.85c4.81-6.92,11.14-13.87,19.03-20.86 c-1.42,0.17-2.8,0.38-4.15,0.66c-3.42,0.69-6.71,1.7-9.89,3.08c-3.22,1.38-6.23,3.01-9.03,4.88c-2.8,1.87-5.36,3.98-7.75,6.36 c-1.83,1.83-3.53,3.77-5.05,5.85L15.36,26.29L15.36,26.29z M64.1,5.43c7.92,6.99,14.25,13.94,19.03,20.86h16.85 c-1.52-2.08-3.22-4.01-5.05-5.85c-2.39-2.39-4.95-4.5-7.75-6.37c-2.77-1.87-5.78-3.49-9.03-4.88c-0.03-0.03-0.07-0.03-0.1-0.07 c-3.15-1.31-6.4-2.35-9.79-3.01c-1.38-0.28-2.77-0.48-4.15-0.66V5.43L64.1,5.43z M60.19,8.72v17.57h16.74 C72.54,20.48,66.97,14.63,60.19,8.72L60.19,8.72z M55.14,106.82V89.04H37.53C42.06,94.99,47.94,100.94,55.14,106.82L55.14,106.82z M55.14,83.99v-23.8H26.01c0.31,7.99,3.01,15.91,7.99,23.8H55.14L55.14,83.99z M55.14,55.14v-23.8H34.87 c-5.19,8.06-8.09,15.98-8.75,23.8H55.14L55.14,55.14z M55.14,26.29V8.72c-6.78,5.92-12.35,11.76-16.74,17.57H55.14L55.14,26.29z"/></g></svg>
          <span style="margin-left: 4px;">Web</span>
      </div>`
            });
          }
        });
      }
    }
  });
}
